<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="" />
    <meta name="author" content="" />
    <!--<link rel="icon" href="../../favicon.ico">-->

    <title>box-gazer</title>

    <!-- Bootstrap core CSS -->
    <link
      href="./node_modules/bootstrap/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <link rel="stylesheet" href="css/highlight/styles/default.css" />

    <style type="text/css">
      /* CSS goes here */
      body {
        background-color: black;
      }

      div p {
        color: white;
        font-family: 'Courier New';
        font-size: 2em;
        text-align: center;
      }

      #typingScreen {
        min-height: 30vh;
      }

      canvas {
        visibility: hidden;
        opacity: 0;
      }

      .fadeIn {
        visibility: visible;
        opacity: 1;
        transition: opacity 2s linear;
      }
    </style>

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <script src="js/three.js"></script>

    <div id="typingScreen">
      <p id="firstTypingLine" />
      <p id="secondTypingLine" />
      <p id="firstLine" style="display:none">Wow... You look tired</p>
      <p id="secondLine" style="display:none">Why don't you take a break? Watch my box for a while, yeah?</p>
    </div>
    <script>
      function type(i, t, ie, oe, resolve) {
        input = document.getElementById(ie).innerHTML;
        document.getElementById(oe).innerHTML += input.charAt(i);

        setTimeout(function() {
            if (i < input.length - 1) {
              type(i + 1, t, ie, oe, resolve);
            } else {
              if (resolve) resolve();
            }
          }, t);
      }

      new Promise(function (resolve) {
        type(0, 100, 'firstLine', 'firstTypingLine', resolve);
      }).then(function (result) {
        new Promise(function (resolve) {
          type(0, 80, 'secondLine', 'secondTypingLine', resolve)
        }).then(function (result) {
          console.log('done');
          document.getElementById('myCanvas').classList.add('fadeIn');
        });
      });
    </script>

    <canvas id="myCanvas"></canvas>
    <script src="js/intro.js"></script>

    <script src="./node_modules/jquery/dist/jquery.min.js"></script>
    <script src="./node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  </body>
</html>
